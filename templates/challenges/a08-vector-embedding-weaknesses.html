<h2>A08: Vector and Embedding Weaknesses</h2>
<p>This challenge demonstrates weaknesses in vector-based semantic search and embeddings.</p>
<p>Your goal is to get the assistant to mention <em>"Houdini the Goatini"</em> when running the prompt: <b>Who discovered gravity?</b></p>

<h3>Import/Export Vectors</h3>
<div class="export-import">
  <input type="file" id="import-file" style="display:none" />
  <button id="import-btn">Import Vectors</button>
  <button id="export-btn">Export Vectors</button>
</div>
<hr>

<script>
document.getElementById("import-btn").onclick = function() {
    document.getElementById("import-file").click();
};

document.getElementById("import-file").onchange = async function(e) {
    const file = e.target.files[0];
    if (!file) return;
    const formData = new FormData();
    formData.append("file", file);

    const res = await fetch("/a08_vector_embedding_weaknesses/import_vectors", {
        method: "POST",
        body: formData
    });
    const text = await res.text();
    alert("Import result: " + text);
};

document.getElementById("export-btn").onclick = async function() {
    const res = await fetch("/a08_vector_embedding_weaknesses/export_vectors");
    const blob = await res.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "vectors.json";
    document.body.appendChild(a);
    a.click();
    a.remove();
    window.URL.revokeObjectURL(url);
};
</script>

<div class="chat-container">
  <div class="messages" id="messages"></div>
  <form id="challenge-form" class="input-bar">
    <textarea id="input" name="input" placeholder="Type your message... (Shift + Enter for new line)" rows="2" required></textarea>
    <button type="submit">Send</button>
  </form>
</div>

<script type="module">
  import { initChat } from "/static/js/main.js";

  initChat({
    endpoint: "/api/a08_vector_embedding_weaknesses",
    botName: "Billy the Goat",
  });
</script>
